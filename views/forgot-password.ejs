<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Recovery</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Add your cursor styles here if needed */
    </style>
</head>
<body class="bg-teal-100 min-h-screen flex items-center justify-center">
    <div class="bg-white p-8 rounded-lg shadow-md w-96">
        <!-- Step 1: Email Verification -->
        <div id="step1">
            <h2 class="text-2xl font-bold text-teal-800 mb-6">Password Recovery</h2>
            <form id="emailForm" onsubmit="return handleEmailSubmit(event)">
                <div class="mb-4">
                    <label class="block text-teal-700 mb-2">Registered Email</label>
                    <input type="email" id="email" 
                           class="w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"
                           required>
                </div>
                <button type="submit" 
                        class="w-full bg-teal-600 text-white py-2 rounded-md hover:bg-teal-700 transition">
                    Verify Email
                </button>
            </form>
        </div>

        <!-- Step 2: Admin Verification -->
        <div id="step2" class="hidden">
            <h2 class="text-2xl font-bold text-teal-800 mb-6">Admin Verification</h2>
            <form id="adminForm" onsubmit="return handleAdminSubmit(event)">
                <div class="mb-4">
                    <label class="block text-teal-700 mb-2">Admin Password</label>
                    <input type="password" id="adminPassword" 
                           class="w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"
                           required>
                </div>
                <button type="submit" 
                        class="w-full bg-teal-600 text-white py-2 rounded-md hover:bg-teal-700 transition">
                    Verify Admin
                </button>
            </form>
        </div>

        <!-- Step 3: Password Reset -->
        <div id="step3" class="hidden">
            <h2 class="text-2xl font-bold text-teal-800 mb-6">Set New Password</h2>
            <form id="passwordForm" onsubmit="return handlePasswordSubmit(event)">
                <div class="mb-4">
                    <label class="block text-teal-700 mb-2">New Password</label>
                    <input type="password" id="newPassword" 
                           class="w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"
                           required minlength="8">
                </div>
                <div class="mb-6">
                    <label class="block text-teal-700 mb-2">Confirm Password</label>
                    <input type="password" id="confirmPassword" 
                           class="w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500"
                           required minlength="8">
                </div>
                <button type="submit" 
                        class="w-full bg-teal-600 text-white py-2 rounded-md hover:bg-teal-700 transition">
                    Reset Password
                </button>
            </form>
        </div>

        <!-- Messages -->
        <div id="message" class="mt-4 text-center text-red-600"></div>
    </div>

    <script>
        const ADMIN_PASSWORD = '12358039@Leon'; // In real implementation, store securely
        let verifiedEmail = '';

        function handleEmailSubmit(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            
            // Simulate email check - in real implementation, check against database
            if(isValidEmail(email)) {
                verifiedEmail = email;
                showStep(2);
                showMessage(`Verification code sent to ${email} (simulated)`);
            } else {
                showMessage('Email not found in our system');
            }
        }

        function handleAdminSubmit(e) {
            e.preventDefault();
            const adminPass = document.getElementById('adminPassword').value;
            
            if(adminPass === ADMIN_PASSWORD) {
                showStep(3);
                showMessage('');
            } else {
                showMessage('Invalid admin credentials');
            }
        }

        function handlePasswordSubmit(e) {
            e.preventDefault();
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;
            
            if(newPass !== confirmPass) {
                showMessage('Passwords do not match');
                return;
            }
            
            // In real implementation, send to server to update password
            showMessage('Password reset successfully! Redirecting...');
            setTimeout(() => {
                window.location.href = '/login';
            }, 2000);
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function showStep(stepNumber) {
            document.querySelectorAll('[id^="step"]').forEach(step => {
                step.classList.add('hidden');
            });
            document.getElementById(`step${stepNumber}`).classList.remove('hidden');
        }

        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }
    </script>
</body>
</html>